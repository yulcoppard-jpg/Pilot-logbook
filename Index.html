<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pilot Logbook — Early Access</title>
  <meta name="description" content="Pilot Logbook — simple offline-first logbook. Join the waitlist for early access." />
  <style>
    body{font-family:Inter,system-ui,Arial;background:#f8fafc;color:#0f172a;margin:0;padding:24px;display:flex;align-items:center;justify-content:center;min-height:100vh}
    .card{max-width:720px;background:white;border-radius:12px;padding:28px;box-shadow:0 6px 20px rgba(16,24,40,0.08)}
    h1{margin:0 0 8px;font-size:22px}
    p{margin:0 0 16px;color:#475569}
    form{display:flex;gap:8px}
    input[type="email"]{flex:1;padding:12px;border-radius:8px;border:1px solid #e6eef3;font-size:16px}
    button{padding:12px 16px;border-radius:8px;background:#0ea5a4;color:white;border:none;font-weight:600}
    .muted{color:#64748b;font-size:13px;margin-top:12px}
    .success{color:green;margin-top:12px}
    .error{color:red;margin-top:12px}
    footer{margin-top:18px;color:#94a3b8;font-size:12px}
  </style>
</head>
<body>
  <div class="card">
    <h1>Pilot Logbook — Early Access</h1>
    <p>Simple, offline-first pilot logbook. Cloud sync (optional), CSV export, and export formats suitable for CASA/FAA. Join the early access list.</p>

    <form id="signupForm" onsubmit="signup(event)">
      <input id="email" type="email" placeholder="you@example.com" required />
      <button type="submit">Get early access</button>
    </form>

    <div id="msg" class="muted" aria-live="polite"></div>

    <footer>
      By signing up you consent to being contacted about this product. We store only your email on a waitlist table in Supabase. No sharing.
    </footer>
  </div>

<script>
async function signup(e){
  e.preventDefault();
  const emailEl = document.getElementById('email');
  const msg = document.getElementById('msg');
  msg.className = 'muted';
  msg.textContent = 'Sending...';
  const email = emailEl.value.trim();
  if(!email){ msg.textContent = 'Enter a valid email'; return; }
  try {
    const res = await fetch('/api/signup', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ email })
    });
    const j = await res.json().catch(()=>({}));
    if(res.ok){
      msg.className = 'success';
      msg.textContent = 'Thanks — you\'re on the list!';
      emailEl.value = '';
    } else {
      msg.className = 'error';
      msg.textContent = (j && j.error) ? j.error : 'Failed to sign up — try again';
    }
  } catch(err){
    msg.className = 'error';
    msg.textContent = 'Network error — check your connection';
  }
}
</script>
</body>
</html>
